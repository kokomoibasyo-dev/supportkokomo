<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­ã©ã‚‚ã‚µãƒãƒ¼ãƒˆãƒ»ãƒŠãƒ“</title>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --mi-color: #ff7f7f; --ki-color: #ffb347; --ka-color: #76ba1b; --to-color: #4db8ff;
            --bg-color: #fcf9f5; --text: #4a4a4a;
        }
        body { font-family: 'Zen Maru Gothic', sans-serif; background-color: var(--bg-color); color: var(--text); margin: 0; padding: 15px; line-height: 1.6; }
        .container { max-width: 550px; width: 100%; margin: 20px auto; background: white; padding: 25px; border-radius: 30px; box-shadow: 0 15px 35px rgba(220, 180, 150, 0.15); border: 1px solid rgba(0,0,0,0.03); box-sizing: border-box;}
        .header h1 { font-size: 1.8rem; color: #d48344; margin: 10px 0; text-align: center; }
        .no-box { background: #fff; border: 2px solid #f9e2c4; border-radius: 20px; padding: 15px; margin-bottom: 20px; text-align: center; }
        .intro-box { background: #fff5e6; border-radius: 15px; padding: 15px; font-size: 0.85rem; border: 1px solid #f9e2c4; margin-bottom: 20px; }
        .tab-menu { display: flex; gap: 8px; margin-bottom: 25px; overflow-x: auto; padding-bottom: 5px; }
        .tab-btn { flex: 1; min-width: 80px; padding: 12px 5px; border: none; border-radius: 16px; cursor: pointer; font-weight: bold; background: #f0f0f0; transition: all 0.2s ease; font-family: inherit; font-size: 0.8rem; color: #999; }
        .tab-btn.active { color: white; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .tab-btn[data-tab="mi"].active { background: var(--mi-color); }
        .tab-btn[data-tab="kishitsu"].active { background: var(--ki-color); }
        .tab-btn[data-tab="kankyo"].active { background: var(--ka-color); }
        .tab-btn[data-tab="total"].active { background: var(--to-color); }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .q-block { margin-bottom: 20px; padding: 20px; border-radius: 20px; background: #fff; border: 1px solid #f0f0f0; box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
        .q-text { font-weight: bold; font-size: 1rem; margin-bottom: 18px; display: block; color: #333; }
        .radio-group { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
        .radio-label { text-align: center; font-size: 0.6rem; cursor: pointer; padding: 8px 4px; border-radius: 12px; border: 1px solid #eee; }
        .radio-label input { width: 20px; height: 20px; margin-bottom: 5px; }
        .btn { width: 100%; padding: 18px; color: white; border: none; border-radius: 50px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-top: 15px; box-shadow: 0 6px 15px rgba(0,0,0,0.1); }
        .res-area { margin-top: 25px; padding: 25px; border-radius: 25px; display: none; background: #fff; border-top: 8px solid; box-shadow: 0 10px 30px rgba(0,0,0,0.05); font-size: 0.9rem; }
        .summary-box { background: #fdfdfd; padding: 18px; border-radius: 18px; margin-bottom: 15px; border: 1px solid #f0f0f0; border-left: 6px solid #ccc; }
        .translation-box { background: #fff5f5; border: 2px solid #ff7f7f; padding: 15px; border-radius: 20px; margin: 20px 0; }
        .message-box { background: #f0f7ff; padding: 25px; border-radius: 20px; margin-top: 30px; border: 1px solid #e0f0ff; }
        #chart-container { width: 100%; max-width: 320px; margin: 20px auto; }
    </style>
</head>
<body>

<div class="container">
    <div class="header"><h1>ğŸŒ± å­ã©ã‚‚ã‚µãƒãƒ¼ãƒˆãƒ»ãƒŠãƒ“</h1></div>
    <div class="no-box">
        <strong style="color: #e67e22; font-size: 1rem; display: block; margin-bottom: 8px;">ğŸ›¡ï¸ å®‰å¿ƒã—ã¦ãŠä½¿ã„ã„ãŸã ããŸã‚ã«</strong>
        <div style="display: flex; justify-content: space-around; font-size: 0.75rem;">
            <span>âŒ è¨ºæ–­ã˜ã‚ƒãªã„</span><span>âŒ æ±ºã‚ã¤ã‘ãªã„</span><span>âŒ å›ºå®šã—ãªã„</span>
        </div>
    </div>
    <div class="intro-box">
        ğŸ•Šï¸ <strong>ã“ã®ãƒ„ãƒ¼ãƒ«ã®ç›®çš„</strong><br>
        ã€Œãªãœã€ã‚ã‚“ãªè¡Œå‹•ã‚’ã™ã‚‹ã‚“ã ã‚ã†ï¼Ÿã€ã¨ã„ã†ç–‘å•ã‚’<strong>ã€Œç†è§£ã®ãƒ’ãƒ³ãƒˆã€</strong>ã«å¤‰ãˆã‚‹ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚å¯¾è±¡ï¼š3æ­³ã€œ12æ­³ã€‚
    </div>

    <div class="tab-menu">
        <button class="tab-btn active" data-tab="mi">âœ¨å¼·ã¿</button>
        <button class="tab-btn" data-tab="kishitsu">ğŸŒˆæ°—è³ª</button>
        <button class="tab-btn" data-tab="kankyo">ğŸ ç’°å¢ƒ</button>
        <button class="tab-btn" data-tab="total" id="total-btn" disabled>ğŸ“Š ç·åˆ</button>
    </div>

    <div id="mi" class="tab-content active"><div id="mi-q"></div><button class="btn" style="background:var(--mi-color)" onclick="calcMI()">å¼·ã¿ã®ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹ ğŸ”</button><div id="chart-container"><canvas id="miChart"></canvas></div><div id="mi-res" class="res-area" style="border-color:var(--mi-color)"></div></div>
    <div id="kishitsu" class="tab-content"><div id="ki-q"></div><button class="btn" style="background:var(--ki-color)" onclick="calcKi()">æ°—è³ªã®ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹ ğŸ”</button><div id="ki-res" class="res-area" style="border-color:var(--ki-color)"></div></div>
    <div id="kankyo" class="tab-content"><div id="ka-q"></div><button class="btn" style="background:var(--ka-color)" onclick="calcKa()">ç’°å¢ƒã®ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹ ğŸ”</button><div id="ka-res" class="res-area" style="border-color:var(--ka-color)"></div></div>
    <div id="total" class="tab-content"><div id="total-content"></div><button class="btn" style="background:var(--to-color)" onclick="window.print()">ğŸ–¨ï¸ çµæœã‚’å°åˆ·ã™ã‚‹</button></div>
</div>

<script>
// å¼·ã¿ãƒ‡ãƒ¼ã‚¿ (å¤‰æ›´ãªã—)
const miDetails = {
    "è¨€èª": {èƒ½åŠ›:"è¨€è‘‰ã‚’æ“ã‚Šã€æƒ³ã„ã‚’ä¼ãˆã‚‹åŠ›", éŠã³:"ã—ã‚Šã¨ã‚Šã€ãŠè©±ä½œã‚Š", é–¢ã‚ã‚Š:"ã€Œä»Šã®è¨€ã„æ–¹ã€ç´ æ•µã ã­ã€ã¨ã»ã‚ã‚‹", é ¼ã‚‹äºº:"ãŠå–‹ã‚Šå¥½ããªãŠã˜ã„ã¡ã‚ƒã‚“ãŠã°ã‚ã¡ã‚ƒã‚“"},
    "è«–ç†": {èƒ½åŠ›:"æ³•å‰‡ã‚’è¦‹ã¤ã‘ã€ç­‹é“ã‚’ç«‹ã¦ã‚‹åŠ›", éŠã³:"æ•°éŠã³ã€ãƒ‘ã‚ºãƒ«ã€å®Ÿé¨“", é–¢ã‚ã‚Š:"ã€Œãªãœã“ã†ãªã‚‹ã¨æ€ã†ï¼Ÿã€ã¨å•ã„ã‹ã‘ã‚‹", é ¼ã‚‹äºº:"å°†æ£‹ã‚„ãƒˆãƒ©ãƒ³ãƒ—ãŒã§ãã‚‹è¦ªæˆš"},
    "ç©ºé–“": {èƒ½åŠ›:"å½¢ã‚’æ‰ãˆã‚¤ãƒ¡ãƒ¼ã‚¸ã™ã‚‹åŠ›", éŠã³:"ãƒ–ãƒ­ãƒƒã‚¯ã€è¿·è·¯ã€ãŠçµµã‹ã", é–¢ã‚ã‚Š:"å›³è§£ã‚„è¦‹æœ¬ã‚’è¦‹ã›ã¦ä¼ãˆã‚‹", é ¼ã‚‹äºº:"DIYã‚„å·¥ä½œãŒå¾—æ„ãªå¤§äºº"},
    "èº«ä½“": {èƒ½åŠ›:"ä½“ã‚’å™¨ç”¨ã«ä½¿ã„ã“ãªã™åŠ›", éŠã³:"ãƒ€ãƒ³ã‚¹ã€ã‚¢ã‚¹ãƒ¬ãƒãƒƒã‚¯ã€ç²˜åœŸ", é–¢ã‚ã‚Š:"ã€Œã‚„ã£ã¦ã¿ã¦è¦šãˆã‚‹ã€ã‚’å°Šé‡ã™ã‚‹", é ¼ã‚‹äºº:"ä¸€ç·’ã«å…¬åœ’ã§éŠã¹ã‚‹å…ƒæ°—ãªå¤§äºº"},
    "éŸ³æ¥½": {èƒ½åŠ›:"éŸ³ã‚„ãƒªã‚ºãƒ ã‚’æ„Ÿã˜å–ã‚‹åŠ›", éŠã³:"æ¥½å™¨ã€æ­Œã€ãƒªã‚ºãƒ ã‚²ãƒ¼ãƒ ", é–¢ã‚ã‚Š:"è¦šãˆãŸã„ã“ã¨ã¯ãƒ¡ãƒ­ãƒ‡ã‚£ã«ä¹—ã›ã‚‹", é ¼ã‚‹äºº:"æ­Œã‚’ä¸€ç·’ã«æ¥½ã—ã‚ã‚‹ãŠã°ã‚ã¡ã‚ƒã‚“"},
    "å¯¾äºº": {èƒ½åŠ›:"äººã®æ°—æŒã¡ã‚’å¯Ÿã—å”åŠ›ã™ã‚‹åŠ›", éŠã³:"ãŠåº—å±‹ã•ã‚“ã€ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ", é–¢ã‚ã‚Š:"ã€Œèª°ã‹ãŒå–œã‚“ã ã€å®Ÿæ„Ÿã‚’å…±æœ‰ã™ã‚‹", é ¼ã‚‹äºº:"è©±ã‚’ã‚ˆãè´ã„ã¦ãã‚Œã‚‹è¿‘æ‰€ã®äºº"},
    "å†…çœ": {èƒ½åŠ›:"è‡ªåˆ†ã‚’è¦‹ã¤ã‚æ„å¿—ã‚’è²«ãåŠ›", éŠã³:"æ—¥è¨˜ã€æ²¡é ­ã§ãã‚‹è¶£å‘³", é–¢ã‚ã‚Š:"ä¸€äººã®æ™‚é–“ã‚’å°Šé‡ã—æ±ºæ–­ã‚’å¾…ã¤", é ¼ã‚‹äºº:"é™ã‹ã«è¦‹å®ˆã£ã¦ãã‚Œã‚‹å¤§äºº"},
    "åšç‰©": {èƒ½åŠ›:"è‡ªç„¶ã‚„ç‰©ã®é•ã„ã‚’è¦‹æ¥µã‚ã‚‹åŠ›", éŠã³:"å›³é‘‘ã€è™«æ•ã‚Šã€åé›†", é–¢ã‚ã‚Š:"ãƒãƒ‹ã‚¢ãƒƒã‚¯ãªç™ºè¦‹ã‚’é¢ç™½ãŒã‚‹", é ¼ã‚‹äºº:"ã“ã ã‚ã‚Šã‚’è‚¯å®šã—ã¦ãã‚Œã‚‹å¤§äºº"}
};

// æ°—è³ªãƒ‡ãƒ¼ã‚¿ (20å•ã«å¢—å¼·ã€ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰å¯¾å¿œ)
const kiData = [
    {t:"ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ", q:"ğŸ‘‚ éŸ³ã€å…‰ã€åŒ‚ã„ã€è‚Œè§¦ã‚Šã«æ•æ„Ÿ"}, {t:"ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ", q:"ğŸ˜Ÿ å¤±æ•—ã‚’æ¥µç«¯ã«æ€–ãŒã‚Šã€æ³£ã"}, {t:"ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ", q:"ğŸŒ³ åˆã‚ã¦ã®å ´æ‰€ã‚„äººã«ã¯ã‹ãªã‚Šæ…é‡"}, {t:"ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ", q:"ğŸ‘€ å‘¨ã‚Šã®å¤§äººã®é¡”è‰²ã‚’ã‚ˆãè¦‹ã¦ã„ã‚‹"},
    {t:"ã‚¢ã‚¯ãƒ†ã‚£ãƒ–", q:"ğŸš€ ã˜ã£ã¨ã—ã¦ã„ã‚‹ã‚ˆã‚Šå‹•ã„ã¦ã„ã‚‹æ–¹ãŒæ¥½"}, {t:"ã‚¢ã‚¯ãƒ†ã‚£ãƒ–", q:"ğŸ”¥ å±ãªã„ã“ã¨ã§ã‚‚æŒ‘æˆ¦ã—ãŸãŒã‚‹"}, {t:"ã‚¢ã‚¯ãƒ†ã‚£ãƒ–", q:"ğŸ“£ è‡ªåˆ†ã®æ„è¦‹ã‚’å¤§ããªå£°ã§ä¸»å¼µã™ã‚‹"}, {t:"ã‚¢ã‚¯ãƒ†ã‚£ãƒ–", q:"ğŸƒâ€â™‚ï¸ èˆˆå‘³ã®ã‚ã‚‹ã‚‚ã®ã¸çœŸã£å…ˆã«é§†ã‘å¯„ã‚‹"},
    {t:"ã‚¨ãƒ³ã‚¸ã‚§ãƒ«", q:"ğŸŒ¸ äº‰ã„ã”ã¨ã‚’é¿ã‘ã€è­²ã‚‹ã“ã¨ãŒå¤šã„"}, {t:"ã‚¨ãƒ³ã‚¸ã‚§ãƒ«", q:"ğŸ¤ èª°ã‹ãŒå›°ã£ã¦ã„ã‚‹ã¨æ”¾ã£ã¦ãŠã‘ãªã„"}, {t:"ã‚¨ãƒ³ã‚¸ã‚§ãƒ«", q:"ğŸ•Šï¸ ç©ã‚„ã‹ã§ã€ãƒ‹ã‚³ãƒ‹ã‚³ã—ã¦ã„ã‚‹ã“ã¨ãŒå¤šã„"}, {t:"ã‚¨ãƒ³ã‚¸ã‚§ãƒ«", q:"ğŸ‚ è‡ªåˆ†ã®æ°—æŒã¡ã‚ˆã‚Šã€Œã¿ã‚“ãªã€ã‚’å„ªå…ˆã™ã‚‹"},
    {t:"ãƒ†ã‚­ã‚¹ãƒˆ", q:"â° æ¯æ—¥ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ãŒå´©ã‚Œã‚‹ã¨æ··ä¹±ã™ã‚‹"}, {t:"ãƒ†ã‚­ã‚¹ãƒˆ", q:"ğŸ“‰ å…·ä½“çš„ãªæ•°å­—ã‚„ã€Œã‚ã¨ã€‡åˆ†ã€ãŒå®‰å¿ƒ"}, {t:"ãƒ†ã‚­ã‚¹ãƒˆ", q:"ğŸ“¦ ç‰©ã®ç½®ãå ´æ‰€ãŒæ±ºã¾ã£ã¦ã„ãªã„ã¨å«Œ"}, {t:"ãƒ†ã‚­ã‚¹ãƒˆ", q:"ğŸ“– æ–‡å­—ã‚„è¨˜å·ã€åœ°å›³ãªã©ã‚’å¥½ã‚“ã§çœºã‚ã‚‹"},
    {t:"ãƒã‚¬ãƒ†ã‚£ãƒ–", q:"âš¡ æ„Ÿæƒ…ã®çˆ†ç™ºãŒæ¿€ã—ãã€åˆ‡ã‚Šæ›¿ãˆãŒè‹¦æ‰‹"}, {t:"ãƒã‚¬ãƒ†ã‚£ãƒ–", q:"ğŸ’ ç´å¾—ãŒã„ã‹ãªã„ã¨ã€ãƒ†ã‚³ã§ã‚‚å‹•ã‹ãªã„"}, {t:"ãƒã‚¬ãƒ†ã‚£ãƒ–", q:"ğŸ˜¤ ã€Œè‡ªåˆ†ãƒ«ãƒ¼ãƒ«ã€ã‚’é‚ªé­”ã•ã‚Œã‚‹ã¨æ¿€æ€’"}, {t:"ãƒã‚¬ãƒ†ã‚£ãƒ–", q:"ğŸŒªï¸ ä¸€åº¦æ³£ãå‡ºã™ã¨æ‰‹ãŒã¤ã‘ã‚‰ã‚Œãªã„"}
];

const kiDetails = {
    "ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ": {ç¿»è¨³:"æ…é‡ã§è±Šã‹ãªæ„Ÿæ€§ã€‚å®‰å…¨ã‚’ç¢ºèªä¸­", å¯¾å¿œ:"ã€Œå®‰å¿ƒã§ãã‚‹äºˆå‘Šã€ã‚’å¤§åˆ‡ã«ã€‚"},
    "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–": {ç¿»è¨³:"æº¢ã‚Œã‚‹å¥½å¥‡å¿ƒã€‚ç”Ÿå‘½åŠ›ã®å¡Š", å¯¾å¿œ:"ç™ºæ•£ã§ãã‚‹å ´ã¨ã€Œæ­¢ã¾ã‚‹ã€ç·´ç¿’ã‚’ã€‚"},
    "ã‚¨ãƒ³ã‚¸ã‚§ãƒ«": {ç¿»è¨³:"å’Œã‚’å°Šã¶å¹³å’Œä¸»ç¾©ã€‚é«˜ã„å…±æ„Ÿæ€§", å¯¾å¿œ:"æœ¬éŸ³ã‚’å‡ºã™ãŸã‚ã®ã€Œç§˜å¯†ã®å¯¾è©±ã€ã‚’ã€‚"},
    "ãƒ†ã‚­ã‚¹ãƒˆ": {ç¿»è¨³:"ç§©åºã¨è¦‹é€šã—ã‚’æ„›ã™ã‚‹ã€‚è«–ç†ã®èŠ½", å¯¾å¿œ:"è¦–è¦šçš„ãªã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ä¸€è²«æ€§ã‚’ã€‚"},
    "ãƒã‚¬ãƒ†ã‚£ãƒ–": {ç¿»è¨³:"æ„å¿—ãŒå¼·ãã€å¦¥å”ã—ãªã„æƒ…ç†±å®¶", å¯¾å¿œ:"æ„Ÿæƒ…ã‚’å…¨è‚¯å®šã—ã¦ã‹ã‚‰ã€äº¤æ¸‰ã‚’ã€‚"}
};

// ç’°å¢ƒãƒ‡ãƒ¼ã‚¿ (15å•)
const kaData = [
    {t:"è¦–è¦šæ”¯æ´",q:"ğŸ“¢ è¨€è‘‰ã®æŒ‡ç¤ºã‚’å¿˜ã‚Œã‚„ã™ã„"}, {t:"è¦–è¦šæ”¯æ´",q:"ğŸ–¼ï¸ å†™çœŸã‚„çµµã ã¨ã™ãç†è§£ã§ãã‚‹"}, {t:"è¦–è¦šæ”¯æ´",q:"ğŸ“… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ã‚ˆãç¢ºèªã™ã‚‹"},
    {t:"è´è¦šé…æ…®",q:"ğŸ‘‚ é¨’ãŒã—ã„å ´æ‰€ã ã¨æ©Ÿå«ŒãŒæ‚ªããªã‚‹"}, {t:"è´è¦šé…æ…®",q:"ğŸ§ é™ã‹ãªå ´æ‰€ã§ãƒ›ãƒƒã¨ã§ãã‚‹"},
    {t:"æ§‹é€ åŒ–",q:"ğŸ§º ç‰‡ä»˜ã‘å ´æ‰€ãŒæ±ºã¾ã£ã¦ãªã„ã¨å›°ã‚‹"}, {t:"æ§‹é€ åŒ–",q:"ğŸªœ æ‰‹é †ã‚’ç´°ã‹ãåˆ†ã‘ã¦ã»ã—ã„"}, {t:"æ§‹é€ åŒ–",q:"ğŸ¤« å›²ã‚ã‚ŒãŸç©ºé–“ãŒè½ã¡ç€ã"},
    {t:"æ„Ÿè¦šçµ±åˆ",q:"ğŸ‘• ç‰¹å®šã®æ„Ÿè§¦ã‚’å«ŒãŒã‚‹"}, {t:"æ„Ÿè¦šçµ±åˆ",q:"ğŸŒ€ é«˜ã„æ‰€ã‚„å›è»¢ãŒå¤§å¥½ã"}, {t:"æ„Ÿè¦šçµ±åˆ",q:"ğŸ§¸ ãã‚…ã£ã¨ã™ã‚‹åˆºæ¿€ã§è½ç€ã"},
    {t:"å®Ÿè¡Œæ©Ÿèƒ½",q:"â¸ï¸ è¡Œå‹•ã®åˆ‡ã‚Šæ›¿ãˆãŒé›£ã—ã„"}, {t:"å®Ÿè¡Œæ©Ÿèƒ½",q:"ğŸ“ å¿˜ã‚Œç‰©ã‚„ç´›å¤±ãŒå¤šã„"}, {t:"å®Ÿè¡Œæ©Ÿèƒ½",q:"â³ æ™‚é–“ã®æµã‚Œã‚’æ´ã¿ã«ãã„"}, {t:"å®Ÿè¡Œæ©Ÿèƒ½",q:"ğŸ’ æº–å‚™ã®é †ç•ªãŒã‚ã‹ã‚‰ãªããªã‚‹"}
];

const kaDetails = {
    "è¦–è¦šæ”¯æ´": {å›°ã‚Š:"æŒ‡ç¤ºã‚¹ãƒ«ãƒ¼", æ‰‹ç«‹ã¦:"ã€ç›®ã§è¦‹ã¦ã‚ã‹ã‚‹ã€‘çµµã€å†™çœŸ", å£°ã‹ã‘:"ã€Œã“ã‚Œè¦‹ã¦ã­ã€ã¨æ³¨ç›®ã•ã›ã¦ä¼ãˆã‚‹"},
    "è´è¦šé…æ…®": {å›°ã‚Š:"é¨’éŸ³ãƒ‘ãƒ‹ãƒƒã‚¯", æ‰‹ç«‹ã¦:"ã€è€³ã®è² æ‹…æ¸›ã€‘ã‚¤ãƒ¤ãƒ¼ãƒãƒ•ã€é™ã‹ãªå ´æ‰€", å£°ã‹ã‘:"ä¸€å¯¾ä¸€ã§é™ã‹ãªå ´æ‰€ã§ä¼ãˆã‚‹"},
    "æ§‹é€ åŒ–": {å›°ã‚Š:"ç‰‡ä»˜ã‘ä¸èƒ½", æ‰‹ç«‹ã¦:"ã€ç‰©ã®ä½æ‰€ã€‘ãƒ©ãƒ™ãƒ«ã€æ‰‹é †123", å£°ã‹ã‘:"ã€Œ1ç•ªã®ç®±ã«å…¥ã‚Œã¦ã­ã€ã¨ä¸€ã¤ãšã¤"},
    "æ„Ÿè¦šçµ±åˆ": {å›°ã‚Š:"åé£Ÿãƒ»éæ•", æ‰‹ç«‹ã¦:"ã€æ„Ÿè¦šã®è£œå®Œã€‘æŠ±ã£ã“ã€æ„Ÿè¦šéŠã³", å£°ã‹ã‘:"ã€Œå«Œãªã‚“ã ã­ã€ã¨ä¸å¿«ã‚’é¿ã‘ã‚‹"},
    "å®Ÿè¡Œæ©Ÿèƒ½": {å›°ã‚Š:"åˆ‡ã‚Šæ›¿ãˆå›°é›£", æ‰‹ç«‹ã¦:"ã€å¤–ä»˜ã‘å¸ä»¤å¡”ã€‘ãƒªã‚¹ãƒˆã€ã‚¢ãƒ©ãƒ¼ãƒ ", å£°ã‹ã‘:"ã€Œã‚ã¨3åˆ†ã§çµ‚ã‚ã‚Šã€ã¨å…·ä½“çš„ã«"}
};

// è³ªå•ç”Ÿæˆ
const miData = [{c:"è¨€èª",q:"ğŸ“š ãŠã—ã‚ƒã¹ã‚Šå¥½ã"},{c:"è¨€èª",q:"ğŸ“– èª­ã¿èã‹ã›å¥½ã"},{c:"è«–ç†",q:"ğŸ§© ãƒ‘ã‚ºãƒ«å¥½ã"},{c:"è«–ç†",q:"ğŸ” ä»•çµ„ã¿çŸ¥ã‚ŠãŸãŒã‚Š"},{c:"ç©ºé–“",q:"ğŸ—ºï¸ åœ°å›³ãƒ»çµµãŒä¸Šæ‰‹"},{c:"ç©ºé–“",q:"ğŸ° ç«‹ä½“ä½œã‚Šå¥½ã"},{c:"èº«ä½“",q:"ğŸƒâ€â™‚ï¸ ã‚¹ãƒãƒ¼ãƒ„å™¨ç”¨"},{c:"èº«ä½“",q:"âœ‚ï¸ æ‰‹å…ˆãŒå™¨ç”¨"},{c:"éŸ³æ¥½",q:"ğŸ¶ é¼»æ­ŒãŒè‡ªç„¶ã«å‡ºã‚‹"},{c:"éŸ³æ¥½",q:"ğŸ¹ éŸ³ã«æ•æ„Ÿ"},{c:"å¯¾äºº",q:"ğŸ¤ æ°—æŒã¡å¯Ÿã™ã‚‹ã®ãŒä¸Šæ‰‹"},{c:"å¯¾äºº",q:"ğŸ« é›†å›£ãŒå¥½ã"},{c:"å†…çœ",q:"ğŸ§˜ æ„å¿—ãŒã¯ã£ãã‚Š"},{c:"å†…çœ",q:"ğŸ’­ ä¸€äººã®æ™‚é–“å¤§åˆ‡"},{c:"åšç‰©",q:"ğŸ¦– åé›†ãƒ»è¦³å¯Ÿå¥½ã"}];

function autoScroll(el) { const b = el.closest('.q-block').nextElementSibling; if (b && b.classList.contains('q-block')) setTimeout(() => b.scrollIntoView({ behavior: 'smooth', block: 'center' }), 300); }
function create5Scale(name) { return `<div class="radio-group">${['ã‚ˆã<br>ã‚ã¦ã¯ã¾ã‚‹','ã‚ã¦ã¯ã¾ã‚‹','ã‚ã‹ã‚‰<br>ãªã„','ã‚ã¾ã‚Š<br>ã‚ã¦ã¯ã¾ã‚‰ãªã„','ã‚ã¦ã¯ã¾<br>ã‚‰ãªã„'].map((l,i)=>`<label class="radio-label"><input type="radio" name="${name}" value="${4-i}" onclick="autoScroll(this)">${l}</label>`).join('')}</div>`; }

function setup() {
    [['mi', miData], ['ki', kiData], ['ka', kaData]].forEach(([id, data]) => {
        const target = document.getElementById(id+'-q');
        data.forEach((d,i)=> target.innerHTML += `<div class="q-block"><span class="q-text">${i+1}. ${d.q}</span>${create5Scale(id+i)}</div>`);
    });
}
setup();

let results = { mi:null, ki:null, ka:null };

function calcMI() {
    let scores = {}; miData.forEach((d,i) => scores[d.c] = (scores[d.c] || 0) + parseInt(document.querySelector(`input[name="mi${i}"]:checked`)?.value || 0));
    results.mi = scores; showMiChart(scores);
    const top = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
    const d = miDetails[top];
    document.getElementById('mi-res').innerHTML = `<h3>ğŸŒŸ å¼·ã¿ï¼š${top}çš„çŸ¥èƒ½</h3>èƒ½åŠ›ï¼š${d.èƒ½åŠ›}<br>éŠã³ï¼š${d.éŠã³}<br>é–¢ã‚ã‚Šï¼š${d.é–¢ã‚ã‚Š}<br>é ¼ã‚‹äººï¼š${d.é ¼ã‚‹äºº}`;
    document.getElementById('mi-res').style.display = 'block'; checkReady();
}

function showMiChart(scores) {
    const ctx = document.getElementById('miChart').getContext('2d');
    if(window.miRadar) window.miRadar.destroy();
    window.miRadar = new Chart(ctx, { type:'radar', data:{ labels:Object.keys(miDetails), datasets:[{ label:'ãƒãƒ©ãƒ³ã‚¹', data: Object.keys(miDetails).map(l=>scores[l]||0), backgroundColor:'rgba(255,127,127,0.2)', borderColor: '#ff7f7f', borderWidth:2 }]}, options:{ scales:{ r:{ min:0, max:8, ticks:{ display:false }}} }});
}

function calcKi() {
    let scores = {}; kiData.forEach((d,i) => scores[d.t] = (scores[d.t] || 0) + parseInt(document.querySelector(`input[name="ki${i}"]:checked`)?.value || 0));
    const sorted = Object.keys(scores).sort((a,b) => scores[b] - scores[a]);
    const top1 = sorted[0]; const top2 = sorted[1];
    // ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰åˆ¤å®šï¼ˆ1ä½ã¨2ä½ã®å·®ãŒ2ç‚¹ä»¥å†…ãªã‚‰æ··åˆï¼‰
    const isHybrid = (scores[top1] - scores[top2] <= 2);
    results.ki = { type: top1, type2: isHybrid ? top2 : null, detail: kiDetails[top1], detail2: isHybrid ? kiDetails[top2] : null };
    
    let resText = isHybrid ? `<h3>ğŸŒˆ æ°—è³ªï¼š${top1} Ã— ${top2} ã‚¿ã‚¤ãƒ—</h3>` : `<h3>ğŸŒˆ æ°—è³ªï¼š${top1}ã‚¿ã‚¤ãƒ—</h3>`;
    resText += `ç¿»è¨³ï¼š${results.ki.detail.ç¿»è¨³}${isHybrid ? ' ï¼† ' + results.ki.detail2.ç¿»è¨³ : ''}<br>å¯¾å¿œï¼š${results.ki.detail.å¯¾å¿œ}`;
    document.getElementById('ki-res').innerHTML = resText;
    document.getElementById('ki-res').style.display = 'block'; checkReady();
}

function calcKa() {
    let scores = {}; kaData.forEach((d,i) => scores[d.t] = (scores[d.t] || 0) + parseInt(document.querySelector(`input[name="ka${i}"]:checked`)?.value || 0));
    const top = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
    results.ka = { type: top, detail: kaDetails[top] };
    document.getElementById('ka-res').innerHTML = `<h3>ğŸ  ç’°å¢ƒï¼š${top}ã¸ã®é…æ…®</h3>æ‰‹ç«‹ã¦ï¼š${kaDetails[top].æ‰‹ç«‹ã¦}<br>å£°ã‹ã‘ï¼š${kaDetails[top].å£°ã‹ã‘}`;
    document.getElementById('ka-res').style.display = 'block'; checkReady();
}

function checkReady() { if([results.mi, results.ki, results.ka].filter(r => r !== null).length >= 2) document.getElementById('total-btn').disabled = false; }

function generateTotalDiagnosis() {
    const miTop = Object.keys(results.mi).reduce((a, b) => results.mi[a] > results.mi[b] ? a : b);
    const kiTitle = results.ki.type2 ? `${results.ki.type} Ã— ${results.ki.type2}` : results.ki.type;
    const translationText = results.ki.type2 
        ? `æ—¥å¸¸ã®ã€Œ${results.ki.detail.å›°ã‚Š}ã€ã‚„ã€Œ${results.ki.detail2.å›°ã‚Š}ã€ã¨ã„ã£ãŸè¡Œå‹•ã¯ã€è„³ãŒã€Œ${results.ki.detail.ç¿»è¨³}ã€ã€Œ${results.ki.detail2.ç¿»è¨³}ã€ã¨ã„ã†äºŒã¤ã®ã‚µã‚¤ãƒ³ã‚’åŒæ™‚ã«å‡ºã—ã¦ã„ã‚‹çŠ¶æ…‹ã§ã™ã€‚`
        : `æ—¥å¸¸ã®ã€Œ${results.ki.detail.å›°ã‚Š}ã€ã¨ã„ã†è¡Œå‹•ã¯ã€ãŠå­ã•ã‚“ãŒå¿…æ­»ã«ã€Œ${results.ki.detail.ç¿»è¨³}ã€ã¨ã‚µã‚¤ãƒ³ã‚’å‡ºã—ã¦ã„ã‚‹çŠ¶æ…‹ã§ã™ã€‚`;

    document.getElementById('total-content').innerHTML = `
        <div class="summary-box" style="border-left-color:var(--mi-color)">ğŸ¤ <strong>å¼·ã¿ï¼š${miTop}</strong><br>${miDetails[miTop].èƒ½åŠ›}ã€‚${miDetails[miTop].é ¼ã‚‹äºº}ã«åŠ©ã‘ã¦ã‚‚ã‚‰ã„ã¾ã—ã‚‡ã†ã€‚</div>
        <div class="summary-box" style="border-left-color:var(--ki-color)">ğŸ«‚ <strong>æ€§æ ¼ï¼š${kiTitle}</strong><br>${results.ki.detail.ç¿»è¨³}${results.ki.type2 ? ' / ' + results.ki.detail2.ç¿»è¨³ : ''}</div>
        <div class="summary-box" style="border-left-color:var(--ka-color)">ğŸ—ï¸ <strong>ç’°å¢ƒï¼š${results.ka.type}</strong><br>${results.ka.detail.æ‰‹ç«‹ã¦}ã€‚</div>
        
        <div class="translation-box">
            <strong>ğŸ’ ç¿»è¨³ï¼šå›°ã£ãŸğŸ˜­ ã‚’ ã‚µãƒãƒ¼ãƒˆã¸</strong><br>
            ${translationText}<br><br>
            ${results.ka.detail.æ‰‹ç«‹ã¦}ã‚’æ•´ãˆã¤ã¤ã€<strong>ã€Œ${results.ki.detail.å¯¾å¿œ}ã€</strong>ã‚’å¿ƒãŒã‘ã‚‹ã“ã¨ã§ã€ãŠå­ã•ã‚“ã¯ã‚ˆã‚Šè‡ªåˆ†ã‚‰ã—ãè¼ã‘ã¾ã™ã€‚
        </div>
        <div class="message-box">ğŸ’Œ <strong>ãŠçˆ¶ã•ã‚“ãƒ»ãŠæ¯ã•ã‚“ã¸</strong><br>æ¯æ—¥ãŠç–²ã‚Œæ§˜ã§ã™ã€‚ä»Šæ—¥ã®çµæœã¯ã€ãŠå­ã•ã‚“ã®ã€Œä»Šã®å–æ‰±èª¬æ˜æ›¸ã€ã®ä¸€ãƒšãƒ¼ã‚¸ã€‚å°‘ã—ãšã¤ã€ä¸€ç·’ã«ã‚ãã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚</div>
    `;
}

document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn, .tab-content').forEach(el => el.classList.remove('active'));
        btn.classList.add('active'); document.getElementById(btn.dataset.tab).classList.add('active');
        if(btn.dataset.tab === 'total') generateTotalDiagnosis();
        window.scrollTo({top: 0, behavior: 'smooth'});
    });
});
</script>
</body>
</html>
