<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­ã©ã‚‚ã‚µãƒãƒ¼ãƒˆãƒ»ãƒŠãƒ“ Plus+</title>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --mi-color: #ff7f7f; --ki-color: #ffb347; --ka-color: #76ba1b; --to-color: #4db8ff;
            --bg-color: #fdfbf7; --text: #444;
        }
        body { font-family: 'Zen Maru Gothic', sans-serif; background-color: var(--bg-color); color: var(--text); padding: 10px; display: flex; justify-content: center; }
        .container { max-width: 800px; width: 100%; background: white; padding: 25px; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); border: 3px dashed #e0e0e0; position: relative; }
        
        .tab-menu { display: flex; gap: 5px; margin-bottom: 20px; flex-wrap: wrap; }
        .tab-btn { flex: 1; padding: 12px 5px; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; background: #eee; transition: 0.3s; font-family: inherit; font-size: 0.8rem; }
        .tab-btn.active { color: white; }
        .tab-btn[data-tab="mi"].active { background: var(--mi-color); }
        .tab-btn[data-tab="kishitsu"].active { background: var(--ki-color); }
        .tab-btn[data-tab="kankyo"].active { background: var(--ka-color); }
        .tab-btn[data-tab="total"].active { background: var(--to-color); }
        .tab-btn:disabled { opacity: 0.3; }

        .tab-content { display: none; animation: fadeIn 0.4s; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .question-scroll { max-height: 450px; overflow-y: auto; padding-right: 10px; border-bottom: 1px solid #eee; }
        .q-block { margin-bottom: 15px; background: #fffdf9; padding: 12px; border-radius: 10px; border: 1px solid #f0f0f0; }
        .q-text { font-weight: bold; font-size: 0.9rem; margin-bottom: 5px; display: block; }
        label { display: block; margin: 5px 0; cursor: pointer; font-size: 0.85rem; }
        
        .btn { width: 100%; padding: 15px; color: white; border: none; border-radius: 50px; font-size: 1rem; font-weight: bold; cursor: pointer; margin-top: 15px; box-shadow: 0 4px 0 rgba(0,0,0,0.1); }
        .btn-save { background: #888; margin-top: 10px; }
        
        .res-area { margin-top: 20px; padding: 15px; border-radius: 15px; display: none; line-height: 1.6; }
        .total-card { padding: 20px; border-radius: 20px; background: white; border: 2px solid var(--to-color); }
        .summary-box { background: #f9f9f9; padding: 15px; border-radius: 12px; margin-bottom: 15px; border-left: 5px solid #ccc; }
        
        #chart-container { max-width: 350px; margin: 15px auto; }
        
        @media print { .tab-menu, .btn, .question-scroll { display: none !important; } .container { border: none; box-shadow: none; } .tab-content.active { display: block !important; } }
    </style>
</head>
<body>

<div class="container" id="app-container">
    <h1>ğŸŒ± å­ã©ã‚‚ã‚µãƒãƒ¼ãƒˆãƒ»ãƒŠãƒ“ Plus</h1>
    
    <div class="tab-menu">
        <button class="tab-btn active" data-tab="mi">1. å¤šé‡çŸ¥èƒ½</button>
        <button class="tab-btn" data-tab="kishitsu">2. æ°—è³ª</button>
        <button class="tab-btn" data-tab="kankyo">3. ç’°å¢ƒãƒ»å®Ÿè¡Œ</button>
        <button class="tab-btn" data-tab="total" id="total-btn" disabled>ğŸ“Š ç·åˆè¨ºæ–­</button>
    </div>

    <div id="mi" class="tab-content active">
        <div class="question-scroll" id="mi-q"></div>
        <button class="btn" style="background:var(--mi-color)" onclick="calcMI()">å¼·ã¿ã‚’åˆ†æã™ã‚‹</button>
        <div id="chart-container"><canvas id="miChart"></canvas></div>
        <div id="mi-res" class="res-area" style="background:#fff0f0"></div>
    </div>

    <div id="kishitsu" class="tab-content">
        <div class="question-scroll" id="ki-q"></div>
        <button class="btn" style="background:var(--ki-color)" onclick="calcKi()">æ°—è³ªã‚’åˆ†æã™ã‚‹</button>
        <div id="ki-res" class="res-area" style="background:#fff7e6"></div>
    </div>

    <div id="kankyo" class="tab-content">
        <div class="question-scroll" id="ka-q"></div>
        <button class="btn" style="background:var(--ka-color)" onclick="calcKa()">ç’°å¢ƒã‚’åˆ†æã™ã‚‹</button>
        <div id="ka-res" class="res-area" style="background:#f0f9eb"></div>
    </div>

    <div id="total" class="tab-content">
        <div class="total-card" id="capture-area">
            <h2 style="text-align:center; color:var(--to-color)">ğŸ“Š ç·åˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒæŒ‡é‡</h2>
            <div id="total-content"></div>
            <p style="font-size:0.7rem; color:#888; margin-top:20px; text-align:center;">â€»ã“ã®è¨ºæ–­ã¯ä»Šã®çŠ¶æ…‹ã‚’ç¤ºã™ä¸€ã¤ã®è¦–ç‚¹ã§ã™ã€‚æˆé•·ã¨ã¨ã‚‚ã«å¤‰åŒ–ã—ã¾ã™ã€‚</p>
        </div>
        <button class="btn" style="background:var(--to-color)" onclick="window.print()">ğŸ–¨ï¸ å°åˆ·ã™ã‚‹</button>
        <button class="btn btn-save" onclick="saveImage()">ğŸ“¸ ç”»åƒã¨ã—ã¦ä¿å­˜ï¼ˆã‚¹ãƒãƒ›ãƒ»PCï¼‰</button>
    </div>
</div>

<script>
// --- è³ªå•ãƒ‡ãƒ¼ã‚¿æ§‹ç¯‰ ---
const miData = [
    { c: "è¨€èª", q: "èªå½™ãŒè±Šå¯Œã§ã€è¨€è‘‰éŠã³ã‚„ãªããªããŒå¥½ã" }, { c: "è¨€èª", q: "èª­æ›¸ã‚„èª­ã¿èã‹ã›ã‚’é™ã‹ã«æ¥½ã—ã‚€" },
    { c: "è«–ç†", q: "ç‰©äº‹ã‚’é †ç•ªã«ä¸¦ã¹ãŸã‚Šåˆ†é¡ã™ã‚‹ã®ãŒå¥½ã" }, { c: "è«–ç†", q: "ã€Œãªãœï¼Ÿã€ã¨ä»•çµ„ã¿ã‚„ç†ç”±ã‚’è¿½æ±‚ã™ã‚‹" },
    { c: "ç©ºé–“", q: "åœ°å›³ã‚„ãƒ‘ã‚ºãƒ«ãŒå¾—æ„ã€‚çµµãŒç«‹ä½“çš„" }, { c: "ç©ºé–“", q: "æ˜ åƒã‚„å›³è§£ãŒã‚ã‚‹ã¨ç†è§£ãŒæ—©ã„" },
    { c: "èº«ä½“", q: "å·¥ä½œã‚„ãƒ–ãƒ­ãƒƒã‚¯ãªã©æ‰‹å…ˆã‚’ä½¿ã†ã®ãŒå¾—æ„" }, { c: "èº«ä½“", q: "ä½“ã‚’å‹•ã‹ã™éŠã³ã‚„ã‚¹ãƒãƒ¼ãƒ„ã§åŠ›ã‚’ç™ºæ®ã™ã‚‹" },
    { c: "éŸ³æ¥½", q: "ãƒ¡ãƒ­ãƒ‡ã‚£ã‚’ã™ãè¦šãˆãŸã‚Šãƒªã‚ºãƒ æ„ŸãŒè‰¯ã„" }, { c: "éŸ³æ¥½", q: "éŸ³ã‚„å£°ã®èãåˆ†ã‘ã«æ•æ„Ÿ" },
    { c: "å¯¾äºº", q: "å‹é”ã®æ°—æŒã¡ã«æ°—ã¥ãã€ä»²ä»‹ãŒã§ãã‚‹" }, { c: "å¯¾äºº", q: "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’ã¨ã£ãŸã‚Šäº¤æµã‚’å¥½ã‚€" },
    { c: "å†…çœ", q: "è‡ªåˆ†ã®å¥½ãå«Œã„ã‚„è€ƒãˆãŒã¯ã£ãã‚Šã—ã¦ã„ã‚‹" }, { c: "å†…çœ", q: "ä¸€äººã§é™ã‹ã«æ²¡é ­ã™ã‚‹æ™‚é–“ã‚’å¥½ã‚€" },
    { c: "åšç‰©", q: "å‹•æ¤ç‰©ã‚„å›³é‘‘ã®çŸ¥è­˜ã‚’åé›†ã™ã‚‹ã®ãŒå¥½ã" }
];

const kiData = [
    { t: "ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ", q: "åˆã‚ã¦ã®å ´æ‰€ã§ã¯è¦ªã‹ã‚‰é›¢ã‚Œã‚‹ã¾ã§æ™‚é–“ãŒã‹ã‹ã‚‹" }, { t: "ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ", q: "éŸ³ã€å…‰ã€è‚Œè§¦ã‚Šãªã©ã®åˆºæ¿€ã«æ•æ„Ÿ" }, { t: "ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ", q: "å®Œç’§ä¸»ç¾©ãªã¨ã“ã‚ãŒã‚ã‚Šã€å¤±æ•—ã‚’æã‚Œã‚‹" },
    { t: "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–", q: "èˆˆå‘³ãŒã‚ã‚‹ã‚‚ã®ã‚’è¦‹ã¤ã‘ã‚‹ã¨ã€å‘¨ã‚Šã‚’è¦‹ãšã«é§†ã‘å‡ºã™" }, { t: "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–", q: "ã˜ã£ã¨ã—ã¦ã„ã‚‹ã‚ˆã‚Šã‚‚ã€å¸¸ã«å‹•ã„ã¦ã„ã‚‹æ–¹ãŒæ¥½" },
    { t: "ã‚¨ãƒ³ã‚¸ã‚§ãƒ«", q: "èãåˆ†ã‘ãŒã‚ˆãã€ãƒ‹ã‚³ãƒ‹ã‚³ç©ã‚„ã‹ãªã“ã¨ãŒå¤šã„" }, { t: "ã‚¨ãƒ³ã‚¸ã‚§ãƒ«", q: "è‡ªå·±ä¸»å¼µã¯æ§ãˆã‚ã§ã€å‘¨ã‚Šã«åˆã‚ã›ãŒã¡" },
    { t: "ãƒ†ã‚­ã‚¹ãƒˆ", q: "æ±ºã¾ã£ãŸé †ç•ªã‚„ç´„æŸã‚’é ‘ãªã«å®ˆã‚ã†ã¨ã™ã‚‹" }, { t: "ãƒ†ã‚­ã‚¹ãƒˆ", q: "å…·ä½“çš„ãªæ•°å­—ã‚„è«–ç†çš„ãªèª¬æ˜ã‚’å¥½ã‚€" },
    { t: "ãƒã‚¬ãƒ†ã‚£ãƒ–", q: "æ„Ÿæƒ…ãŒæ¿€ã—ãã€ä¸€åº¦æ³£ãå‡ºã™ã¨åã¾ã‚Šã«ãã„" }, { t: "ãƒã‚¬ãƒ†ã‚£ãƒ–", q: "ã“ã ã‚ã‚ŠãŒå¼·ãã€è‡ªåˆ†ã®æ€ã„é€šã‚Šã«ã—ãŸã„æ°—æŒã¡ãŒå¼·ã„" },
    { t: "ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ", q: "å°ã•ãªå¤‰åŒ–ã«æ°—ã¥ãã€ä¸å®‰ã‚’æ„Ÿã˜ã‚„ã™ã„" }, { t: "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–", q: "å£°ãŒå¤§ããã€å…¨èº«ã§å–œã³ã‚„æ€’ã‚Šã‚’è¡¨ç¾ã™ã‚‹" }, { t: "ãƒ†ã‚­ã‚¹ãƒˆ", q: "è¦‹é€šã—ãŒã¤ã‹ãªã„ã¨å‹•ã‘ãªããªã‚‹" }, { t: "ã‚¨ãƒ³ã‚¸ã‚§ãƒ«", q: "å¹³å’Œä¸»ç¾©ã§ã€äº‰ã„ã”ã¨ã‚’é¿ã‘ãŸãŒã‚‹" }
];

const kaData = [
    { t: "è¦–è¦š", q: "è¨€è‘‰ã®æŒ‡ç¤ºã ã‘ã§ã¯ä½•ã‚’ã™ã¹ãã‹å¿˜ã‚Œã¦ã—ã¾ã†" }, { t: "è¦–è¦š", q: "æ–‡å­—ã‚ˆã‚Šå†™çœŸã‚„ãƒ”ã‚¯ãƒˆã‚°ãƒ©ãƒ ã®æ–¹ãŒä¼ã‚ã‚‹" },
    { t: "è´è¦š", q: "é™ã‹ãªç’°å¢ƒãªã‚‰é›†ä¸­ã§ãã‚‹ãŒã€é›‘éŸ³ã§ãƒ‘ãƒ‹ãƒƒã‚¯ã«ãªã‚‹" }, { t: "è´è¦š", q: "ã‚¤ãƒ¤ãƒ¼ãƒãƒ•ç­‰ã®é®éŸ³å™¨å…·ãŒã‚ã‚‹ã¨å®‰å¿ƒã™ã‚‹" },
    { t: "æ§‹é€ ", q: "ç‰‡ä»˜ã‘ã‚‹å ´æ‰€ãŒæ˜ç¢ºã«æ±ºã¾ã£ã¦ã„ãªã„ã¨ç‰‡ä»˜ã‘ã‚‰ã‚Œãªã„" }, { t: "æ§‹é€ ", q: "ã€Œã‚ã¨ã§ã€ã§ã¯ãªãã€Œ10åˆ†å¾Œã€ã¨å…·ä½“çš„ã«è¨€ã†æ–¹ãŒå‹•ã‘ã‚‹" },
    { t: "æ„Ÿè¦š", q: "ç‰¹å®šã®æœã®æ„Ÿè§¦ã‚„ã€ç‰¹å®šã®é£Ÿã¹ç‰©ã®é£Ÿæ„Ÿã‚’å¼·ãå«ŒãŒã‚‹" }, { t: "æ„Ÿè¦š", q: "ç‹­ã„å ´æ‰€ã‚„éš…ã£ã“ã«å…¥ã‚‹ã¨è½ã¡ç€ã" },
    { t: "å®Ÿè¡Œ", q: "è¤‡æ•°ã®ä½œæ¥­ã‚’ä¸¦è¡Œã—ã¦è¡Œã†ã®ãŒé›£ã—ã„" }, { t: "å®Ÿè¡Œ", q: "æº–å‚™ã‚„åˆ‡ã‚Šæ›¿ãˆã«éå¸¸ã«æ™‚é–“ãŒã‹ã‹ã‚‹" },
    { t: "å®Ÿè¡Œ", q: "ã€Œä½•ã‚’æŒã£ã¦ã„ãã‹ã€ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆãŒå¿…è¦" }, { t: "æ„Ÿè¦š", q: "æºã‚Œã‚‹ã‚‚ã®ã‚„å›è»¢ã™ã‚‹ã‚‚ã®ã«å¼·ãæƒ¹ã‹ã‚Œã‚‹" },
    { t: "æ§‹é€ ", q: "è¦–è¦šçš„ãªã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¡¨ãŒã‚ã‚‹ã¨è‡ªåˆ†ã‹ã‚‰å‹•ã‘ã‚‹" }, { t: "è´è¦š", q: "å¾Œã‚ã‹ã‚‰æ€¥ã«å£°ã‚’ã‹ã‘ã‚‰ã‚Œã‚‹ã¨ã²ã©ãé©šã" }, { t: "å®Ÿè¡Œ", q: "æœ€å¾Œã¾ã§ã‚„ã‚Šé‚ã’ã‚‹ã®ã«å¤§äººã®åŠ±ã¾ã—ãŒå¿…è¦" }
];

// åˆæœŸæç”»
function setup() {
    const miQ = document.getElementById('mi-q');
    miData.forEach((d,i)=> miQ.innerHTML += `<div class="q-block"><span class="q-text">${d.q}</span><label><input type="radio" name="mi${i}" value="2"> å½“ã¦ã¯ã¾ã‚‹</label><label><input type="radio" name="mi${i}" value="0"> å½“ã¦ã¯ã¾ã‚‰ãªã„</label></div>`);
    const kiQ = document.getElementById('ki-q');
    kiData.forEach((d,i)=> kiQ.innerHTML += `<div class="q-block"><span class="q-text">${d.q}</span><label><input type="radio" name="ki${i}" value="2"> å½“ã¦ã¯ã¾ã‚‹</label><label><input type="radio" name="ki${i}" value="0"> å½“ã¦ã¯ã¾ã‚‰ãªã„</label></div>`);
    const kaQ = document.getElementById('ka-q');
    kaData.forEach((d,i)=> kaQ.innerHTML += `<div class="q-block"><span class="q-text">${d.q}</span><label><input type="radio" name="ka${i}" value="2"> å½“ã¦ã¯ã¾ã‚‹</label><label><input type="radio" name="ka${i}" value="0"> å½“ã¦ã¯ã¾ã‚‰ãªã„</label></div>`);
}
setup();

let results = { mi:null, ki:null, ka:null };

function calcMI() {
    let scores = {};
    miData.forEach((d,i) => {
        const val = parseInt(document.querySelector(`input[name="mi${i}"]:checked`)?.value || 0);
        scores[d.c] = (scores[d.c] || 0) + val;
    });
    results.mi = scores;
    showMiChart(scores);
    const top = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
    document.getElementById('mi-res').innerHTML = `<b>ã€${top}çš„çŸ¥èƒ½ã€‘</b>ãŒé«˜ã„å‚¾å‘ã§ã™ã€‚ã“ã®åˆ†é‡ã‚’å…¥ã‚Šå£ã«ã—ã¦å­¦ç¿’ã‚„å¯¾è©±ã‚’é€²ã‚ã‚‹ã®ãŒè¿‘é“ã§ã™ã€‚`;
    document.getElementById('mi-res').style.display = 'block';
    checkReady();
}

function showMiChart(scores) {
    const ctx = document.getElementById('miChart').getContext('2d');
    const labels = ["è¨€èª","è«–ç†","ç©ºé–“","èº«ä½“","éŸ³æ¥½","å¯¾äºº","å†…çœ","åšç‰©"];
    new Chart(ctx, { type:'radar', data:{ labels, datasets:[{ label:'çŸ¥èƒ½ãƒãƒ©ãƒ³ã‚¹', data: labels.map(l=>scores[l]||0), backgroundColor:'rgba(255,127,127,0.3)', borderColor: '#ff7f7f' }]}, options:{ scales:{ r:{ min:0, max:6, ticks:{ display:false }}} }});
}

function calcKi() {
    let types = {};
    kiData.forEach((d,i) => {
        const val = parseInt(document.querySelector(`input[name="ki${i}"]:checked`)?.value || 0);
        types[d.t] = (types[d.t] || 0) + val;
    });
    const main = Object.keys(types).reduce((a, b) => types[a] > types[b] ? a : b);
    const advice = { "ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ":"ã€Œå¤§ä¸ˆå¤«ï¼Ÿã€ã‚ˆã‚Šã€Œè¦‹ã¦ã‚‹ã‚ˆã€ã®å®‰å¿ƒæ„Ÿã‚’ã€‚","ã‚¢ã‚¯ãƒ†ã‚£ãƒ–":"ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ç™ºæ•£å ´æ‰€ã‚’ç¢ºä¿ã€‚æŒ‡ç¤ºã¯çŸ­ãï¼","ã‚¨ãƒ³ã‚¸ã‚§ãƒ«":"æœ¬éŸ³ã‚’é£²ã¿è¾¼ã‚“ã§ã„ãªã„ã‹ã€ä¸€å¯¾ä¸€ã§ç¢ºèªã€‚","ãƒ†ã‚­ã‚¹ãƒˆ":"è¦‹é€šã—ã¨è«–ç†ã‚’ã€‚ç´å¾—ã™ã‚Œã°ä¸€ç•ªå‹•ã‘ã‚‹ã€‚","ãƒã‚¬ãƒ†ã‚£ãƒ–":"æ„Ÿæƒ…ã‚’ä¸€åº¦å…¨ã¦å—å®¹ã—ã¦ã‹ã‚‰ã€ä»£æ›¿æ¡ˆã‚’æç¤ºã€‚" };
    results.ki = { type: main, advice: advice[main] };
    document.getElementById('ki-res').innerHTML = `<b>ã€${main}ã‚¿ã‚¤ãƒ—ã€‘</b>ã®å‚¾å‘ã§ã™ã€‚<br>å£°ã‹ã‘ä¾‹ï¼š${advice[main]}`;
    document.getElementById('ki-res').style.display = 'block';
    checkReady();
}

function calcKa() {
    let list = [];
    kaData.forEach((d,i) => {
        if(document.querySelector(`input[name="ka${i}"]:checked`)?.value == "2") list.push(d.t);
    });
    results.ka = Array.from(new Set(list));
    document.getElementById('ka-res').innerHTML = `èª¿æ•´ãŒå¿…è¦ãªé …ç›®ï¼š<b>${results.ka.join('ã€') || 'ç‰¹ã«ãªã—'}</b><br>ç’°å¢ƒã®æ§‹é€ åŒ–ã‚’å„ªå…ˆã—ã¾ã—ã‚‡ã†ã€‚`;
    document.getElementById('ka-res').style.display = 'block';
    checkReady();
}

function checkReady() { if(results.mi && results.ki && results.ka) { document.getElementById('total-btn').disabled = false; document.getElementById('total-btn').innerText = "ğŸ“Š ç·åˆè¨ºæ–­ã‚’ç”Ÿæˆ"; } }

function generateTotalDiagnosis() {
    const miTop = Object.keys(results.mi).reduce((a, b) => results.mi[a] > results.mi[b] ? a : b);
    const content = document.getElementById('total-content');
    content.innerHTML = `
        <div class="summary-box" style="border-color:var(--mi-color)"><b>å¼·ã¿ã®ç¿»è¨³ï¼š</b> ${miTop}çš„ãªæ´»å‹•ã‚’é€šã—ã¦è‡ªä¿¡ã‚’è‚²ã¿ã¾ã—ã‚‡ã†ã€‚</div>
        <div class="summary-box" style="border-color:var(--ki-color)"><b>é–¢ã‚ã‚Šã®èª¿æ•´ï¼š</b> ${results.ki.type}ã‚¿ã‚¤ãƒ—ã€‚${results.ki.advice}</div>
        <div class="summary-box" style="border-color:var(--ka-color)"><b>ç’°å¢ƒã®è¨­è¨ˆï¼š</b> ${results.ka.includes('è¦–è¦š') ? 'å†™çœŸã‚„çµµã‚«ãƒ¼ãƒ‰ã§ã®è¦–è¦šæ”¯æ´' : 'ç’°å¢ƒã®æ•´ç†'}ã‚’é‡ç‚¹çš„ã«ã€‚</div>
        <div style="background:#fff7f7; padding:15px; border-radius:10px; border:2px dashed #ff7f7f;">
            <b>ğŸ’¡ çµ±åˆã‚¢ãƒ‰ãƒã‚¤ã‚¹ï¼š</b><br>
            ${miTop}ã®å¼·ã¿ã‚’æ´»ã‹ã—ã¤ã¤ã€${results.ka[0] || 'æ§‹é€ åŒ–'}ã®å·¥å¤«ã‚’åŠ ãˆãŸç’°å¢ƒã‚’ã€‚${results.ki.type}ãªæ°—è³ªã‚’è€ƒæ…®ã—ã€æˆåŠŸä½“é¨“ã‚’ç©ã‚ã‚‹å°ã•ãªã‚¹ãƒ†ãƒƒãƒ—ã‚’ç”¨æ„ã—ã¦ä¼´èµ°ã—ã¾ã—ã‚‡ã†ã€‚
        </div>`;
}

// ã‚¿ãƒ–åˆ¶å¾¡
document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn, .tab-content').forEach(el => el.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.dataset.tab).classList.add('active');
        if(btn.dataset.tab === 'total') generateTotalDiagnosis();
    });
});

// ç”»åƒä¿å­˜æ©Ÿèƒ½
function saveImage() {
    const area = document.getElementById('capture-area');
    html2canvas(area).then(canvas => {
        const link = document.createElement('a');
        link.download = 'child-support-result.png';
        link.href = canvas.toDataURL();
        link.click();
    });
}
</script>

</body>
</html>
