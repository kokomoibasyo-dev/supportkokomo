<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­ã©ã‚‚ã‚µãƒãƒ¼ãƒˆãƒ»ãƒŠãƒ“</title>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --mi-color: #ff7f7f; --ki-color: #ffb347; --ka-color: #76ba1b; --to-color: #4db8ff;
            --bg-color: #fcf9f5; --text: #4a4a4a;
        }
        body { font-family: 'Zen Maru Gothic', sans-serif; background-color: var(--bg-color); color: var(--text); margin: 0; padding: 15px; line-height: 1.6; }
        .container { max-width: 550px; width: 100%; margin: 20px auto; background: white; padding: 25px; border-radius: 30px; box-shadow: 0 15px 35px rgba(220, 180, 150, 0.15); border: 1px solid rgba(0,0,0,0.03); box-sizing: border-box;}
        .header h1 { font-size: 1.8rem; color: #d48344; margin: 10px 0; text-align: center; }
        
        /* 3ã¤ã®NOãƒœãƒƒã‚¯ã‚¹ */
        .no-box { background: #fff; border: 2px solid #f9e2c4; border-radius: 20px; padding: 15px; margin-bottom: 20px; text-align: center; }
        
        /* ã‚¿ãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆå¾©æ´»ï¼ï¼‰ */
        .tab-menu { display: flex; gap: 8px; margin-bottom: 25px; overflow-x: auto; padding-bottom: 5px; }
        .tab-btn { flex: 1; min-width: 80px; padding: 12px 5px; border: none; border-radius: 16px; cursor: pointer; font-weight: bold; background: #f0f0f0; transition: all 0.2s ease; font-family: inherit; font-size: 0.8rem; color: #999; }
        .tab-btn.active { color: white; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .tab-btn[data-tab="mi"].active { background: var(--mi-color); }
        .tab-btn[data-tab="kishitsu"].active { background: var(--ki-color); }
        .tab-btn[data-tab="kankyo"].active { background: var(--ka-color); }
        .tab-btn[data-tab="total"].active { background: var(--to-color); }

        /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¡¨ç¤ºãƒ»éè¡¨ç¤º */
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .q-block { margin-bottom: 20px; padding: 20px; border-radius: 20px; background: #fff; border: 1px solid #f0f0f0; box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
        .q-text { font-weight: bold; font-size: 1rem; margin-bottom: 18px; display: block; color: #333; line-height: 1.4; }
        .radio-group { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
        .radio-label { text-align: center; font-size: 0.6rem; cursor: pointer; padding: 8px 4px; border-radius: 12px; border: 1px solid #eee; }
        .radio-label input { width: 20px; height: 20px; margin-bottom: 5px; }
        
        .btn { width: 100%; padding: 18px; color: white; border: none; border-radius: 50px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-top: 15px; box-shadow: 0 6px 15px rgba(0,0,0,0.1); transition: 0.2s; }
        .btn:active { transform: scale(0.98); }
        
        .res-area { margin-top: 25px; padding: 25px; border-radius: 25px; display: none; background: #fff; border-top: 8px solid; box-shadow: 0 10px 30px rgba(0,0,0,0.05); font-size: 0.9rem; }
        .summary-box { background: #fdfdfd; padding: 18px; border-radius: 18px; margin-bottom: 15px; border: 1px solid #f0f0f0; border-left: 6px solid #ccc; font-size: 0.85rem; }
        .translation-box { background: #fff5f5; border: 2px solid #ff7f7f; padding: 15px; border-radius: 20px; margin: 20px 0; font-size: 0.9rem; }
        .message-box { background: #f0f7ff; padding: 25px; border-radius: 20px; margin-top: 30px; font-size: 0.9rem; border: 1px solid #e0f0ff; }
        
        #chart-container { width: 100%; max-width: 320px; margin: 20px auto; }
        @media print { .tab-menu, .btn, .no-box, .q-block { display: none !important; } }
    </style>
</head>
<body>

<div class="container">
    <div class="header"><h1>ğŸŒ± å­ã©ã‚‚ã‚µãƒãƒ¼ãƒˆãƒ»ãƒŠãƒ“</h1></div>
    
    <div class="no-box">
        <strong style="color: #e67e22; font-size: 1rem; display: block; margin-bottom: 8px;">ğŸ›¡ï¸ å®‰å¿ƒã—ã¦ãŠä½¿ã„ã„ãŸã ããŸã‚ã«</strong>
        <div style="display: flex; justify-content: space-around; font-size: 0.75rem;">
            <span>âŒ è¨ºæ–­ã˜ã‚ƒãªã„</span><span>âŒ æ±ºã‚ã¤ã‘ãªã„</span><span>âŒ å›ºå®šã—ãªã„</span>
        </div>
    </div>

    <div class="tab-menu">
        <button class="tab-btn active" data-tab="mi">âœ¨å¼·ã¿</button>
        <button class="tab-btn" data-tab="kishitsu">ğŸŒˆæ°—è³ª</button>
        <button class="tab-btn" data-tab="kankyo">ğŸ ç’°å¢ƒ</button>
        <button class="tab-btn" data-tab="total" id="total-btn" disabled>ğŸ“Š ç·åˆ</button>
    </div>

    <div id="mi" class="tab-content active">
        <div id="mi-q"></div>
        <button class="btn" style="background:var(--mi-color)" onclick="calcMI()">å¼·ã¿ã®ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹ ğŸ”</button>
        <div id="chart-container"><canvas id="miChart"></canvas></div>
        <div id="mi-res" class="res-area" style="border-color:var(--mi-color)"></div>
    </div>

    <div id="kishitsu" class="tab-content">
        <div id="ki-q"></div>
        <button class="btn" style="background:var(--ki-color)" onclick="calcKi()">æ°—è³ªã®ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹ ğŸ”</button>
        <div id="ki-res" class="res-area" style="border-color:var(--ki-color)"></div>
    </div>

    <div id="kankyo" class="tab-content">
        <div id="ka-q"></div>
        <button class="btn" style="background:var(--ka-color)" onclick="calcKa()">ç’°å¢ƒã®ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹ ğŸ”</button>
        <div id="ka-res" class="res-area" style="border-color:var(--ka-color)"></div>
    </div>

    <div id="total" class="tab-content">
        <div id="capture-area">
            <h2 style="text-align:center; color:var(--to-color);">ğŸ¤ ãŠå­ã•ã‚“ã¸ã®ä¼´èµ°ã‚¬ã‚¤ãƒ‰</h2>
            <div id="total-content"></div>
        </div>
        <button class="btn" style="background:var(--to-color)" onclick="window.print()">ğŸ–¨ï¸ çµæœã‚’å°åˆ·ã™ã‚‹</button>
    </div>

    <div style="text-align: center; font-size: 0.7rem; color: #bbb; margin-top: 40px; border-top: 1px solid #eee; padding-top: 20px;">
        å¿ƒç†å­¦ç†è«–ã«åŸºã¥ãå®¶åº­ç”¨ã‚¬ã‚¤ãƒ‰
    </div>
</div>

<script>
// ãƒ‡ãƒ¼ã‚¿ã¨ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå…·ä½“çš„ãªå†…å®¹ã¯ç¶­æŒï¼‰
const miDetails = {
    "è¨€èª": {èƒ½åŠ›:"è¨€è‘‰ã‚’æ“ã‚Šã€æƒ³ã„ã‚’ä¼ãˆã‚‹åŠ›", éŠã³:"ã—ã‚Šã¨ã‚Šã€ãŠè©±ä½œã‚Šã€èª­ã¿èã‹ã›", é–¢ã‚ã‚Š:"ã€Œä»Šã®è¨€ã„æ–¹ã€ç´ æ•µã ã­ã€ã¨è¡¨ç¾ã‚’å…·ä½“çš„ã«ã»ã‚ã‚‹", é ¼ã‚‹äºº:"ãŠå–‹ã‚Šã‚’æ¥½ã—ã‚“ã§ãã‚Œã‚‹ãŠã˜ã„ã¡ã‚ƒã‚“ã‚„ãŠã°ã‚ã¡ã‚ƒã‚“"},
    "è«–ç†": {èƒ½åŠ›:"ç­‹é“ã‚’ç«‹ã¦ã¦è€ƒãˆã€æ³•å‰‡ã‚’è¦‹ã¤ã‘ã‚‹åŠ›", éŠã³:"æ•°éŠã³ã€ãƒ‘ã‚ºãƒ«ã€ç§‘å­¦å®Ÿé¨“ã€ãƒ¬ã‚´", é–¢ã‚ã‚Š:"ã€Œãªãœã“ã†ãªã‚‹ã¨æ€ã†ï¼Ÿã€ã¨äºˆæ¸¬ã‚’ç«‹ã¦ã‚‹å•ã„ã‹ã‘ã‚’", é ¼ã‚‹äºº:"å°†æ£‹ã‚„ãƒˆãƒ©ãƒ³ãƒ—ã‚’æ ¹æ°—ã‚ˆãä»˜ãåˆãˆã‚‹è¦ªæˆš"},
    "ç©ºé–“": {èƒ½åŠ›:"å½¢ã‚„ä½ç½®ã‚’æ‰ãˆã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã™ã‚‹åŠ›", éŠã³:"ãƒ–ãƒ­ãƒƒã‚¯ã€è¿·è·¯ã€ãŠçµµã‹ãã€å·¥ä½œ", é–¢ã‚ã‚Š:"è¨€è‘‰ã§æŒ‡ç¤ºã›ãšã€å›³è§£ã‚„è¦‹æœ¬ã‚’è¦‹ã›ã‚‹ã¨ç†è§£ãŒé€²ã‚€", é ¼ã‚‹äºº:"DIYãŒå¾—æ„ãªãŠçˆ¶ã•ã‚“ã‚„å·¥ä½œãŒå¥½ããªå¤§äºº"},
    "èº«ä½“": {èƒ½åŠ›:"è‡ªåˆ†ã®ä½“ã‚’å™¨ç”¨ã«ä½¿ã„ã“ãªã™åŠ›", éŠã³:"ãƒ€ãƒ³ã‚¹ã€ã‚¢ã‚¹ãƒ¬ãƒãƒƒã‚¯ã€ç²˜åœŸç´°å·¥", é–¢ã‚ã‚Š:"ã€Œã‚„ã£ã¦ã¿ã¦è¦šãˆã‚‹ã€ã‚’å°Šé‡ã€‚ä½“ã‚’å‹•ã‹ã—ãªãŒã‚‰å­¦ã¶ç’°å¢ƒã‚’", é ¼ã‚‹äºº:"ä¸€ç·’ã«å…¬åœ’ã§èµ°ã‚Šå›ã‚Œã‚‹å…ƒæ°—ãªå”çˆ¶ã•ã‚“ã‚„å¹´ä¸Šã®å…„å¼Ÿ"},
    "éŸ³æ¥½": {èƒ½åŠ›:"éŸ³ã‚„ãƒªã‚ºãƒ ã‚’æ„Ÿã˜å–ã‚Šã€è¡¨ç¾ã™ã‚‹åŠ›", éŠã³:"æ¥½å™¨éŠã³ã€æ­Œã€ãƒªã‚ºãƒ ã‚²ãƒ¼ãƒ ", é–¢ã‚ã‚Š:"è¦šãˆãŸã„ã“ã¨ã¯ãƒ¡ãƒ­ãƒ‡ã‚£ã«ä¹—ã›ã‚‹ã¨é©šãã»ã©å®šç€ã™ã‚‹", é ¼ã‚‹äºº:"éŸ³æ¥½å¥½ããªãŠæ¯ã•ã‚“ã‚„ã€é¼»æ­Œã‚’ä¸€ç·’ã«æ¥½ã—ã‚ã‚‹ãŠã°ã‚ã¡ã‚ƒã‚“"},
    "å¯¾äºº": {èƒ½åŠ›:"ä»–äººã®æ°—æŒã¡ã‚’å¯Ÿã—ã€å”åŠ›ã—åˆã†åŠ›", éŠã³:"ãŠåº—å±‹ã•ã‚“ã”ã£ã“ã€ãƒãƒ¼ãƒ ã€ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ", é–¢ã‚ã‚Š:"ã€Œèª°ã‹ãŒå–œã‚“ã§ãã‚ŒãŸã€å®Ÿæ„Ÿã‚’å…±æœ‰ã™ã‚‹ã¨ã‚„ã‚‹æ°—ãŒçˆ†ç™º", é ¼ã‚‹äºº:"ã„ã¤ã‚‚å„ªã—ãè©±ã‚’è´ã„ã¦ãã‚Œã‚‹è¿‘æ‰€ã®äºº"},
    "å†…çœ": {èƒ½åŠ›:"è‡ªåˆ†ã‚’å®¢è¦³çš„ã«è¦‹ã¤ã‚ã€æ„å¿—ã‚’è²«ãåŠ›", éŠã³:"æ—¥è¨˜ã€ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã€æ²¡é ­ã§ãã‚‹è¶£å‘³", é–¢ã‚ã‚Š:"ç„¡ç†ã«ç¾¤ã‚Œã•ã›ãšã€ä¸€äººã®æ™‚é–“ã‚’å°Šé‡ã—æ±ºæ–­ã‚’å¾…ã¤", é ¼ã‚‹äºº:"å£å‡ºã—ã›ãšé™ã‹ã«è¦‹å®ˆã£ã¦ãã‚Œã‚‹ç©ã‚„ã‹ãªãŠã˜ã„ã¡ã‚ƒã‚“"},
    "åšç‰©": {èƒ½åŠ›:"è‡ªç„¶ã‚„ç‰©ã®ç´°ã‹ãªé•ã„ã‚’è¦‹æ¥µã‚ã‚‹åŠ›", éŠã³:"å›³é‘‘ä½œã‚Šã€è™«æ•ã‚Šã€ç‰¹å®šã®ãƒ†ãƒ¼ãƒã®åé›†", é–¢ã‚ã‚Š:"ã€Œã“ã®é•ã„ã€ã‚ã‹ã‚‹ï¼Ÿã€ã¨ãƒãƒ‹ã‚¢ãƒƒã‚¯ãªç™ºè¦‹ã‚’è‚¯å®šã™ã‚‹", é ¼ã‚‹äºº:"ã“ã ã‚ã‚Šã‚’ã€Œé¢ç™½ã„ã­ï¼ã€ã¨é¢ç™½ãŒã£ã¦ãã‚Œã‚‹å¤§äºº"}
};

const kiDetails = {
    "ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ": {å›°ã‚Š:"æ–°ã—ã„ç’°å¢ƒã§å›ºã¾ã‚‹ã€å¤±æ•—ã‚’æã‚Œã¦æ³£ã", ç¿»è¨³:"ã€Œå®‰å…¨ã‹ã©ã†ã‹ã€ã‚’æ…é‡ã«ç¢ºèªã—ã¦ã„ã‚‹è¨¼æ‹ ", å¯¾å¿œ:"ã€Œæ€–ã„ã‚ˆã­ã€è¦‹ã¦ã‚‹ã‹ã‚‰å¤§ä¸ˆå¤«ã€ã¨äºˆå‘Šã¨å®‰å¿ƒã‚’ã‚»ãƒƒãƒˆã«ã€‚"},
    "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–": {å›°ã‚Š:"è¡å‹•çš„ã«é£›ã³å‡ºã™ã€è©±ã‚’èã‹ãšã«å‹•ã", ç¿»è¨³:"ã€Œæº¢ã‚Œã‚‹å¥½å¥‡å¿ƒã€ãŒæŠ‘åˆ¶ã‚’ä¸Šå›ã£ã¦ã„ã‚‹çŠ¶æ…‹", å¯¾å¿œ:"å±ã‚‹ã‚ˆã‚Šã€Œæ­¢ã¾ã‚‹å ´æ‰€ã€ã‚’æ±ºã‚ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®ç™ºæ•£å…ˆã‚’ç¢ºä¿ã€‚"},
    "ã‚¨ãƒ³ã‚¸ã‚§ãƒ«": {å›°ã‚Š:"è‡ªåˆ†ã®æ„è¦‹ã‚’è¨€ã‚ãªã„ã€å‘¨ã‚Šã«æµã•ã‚Œã™ãã‚‹", ç¿»è¨³:"ã€Œå ´ã®å¹³å’Œã€ã‚’å®ˆã‚‹ã“ã¨ã‚’æœ€å„ªå…ˆã«è€ƒãˆã¦ã„ã‚‹", å¯¾å¿œ:"ã€Œã‚ãªãŸã¯ã©ã†ã—ãŸã„ï¼Ÿã€ã¨æœ¬éŸ³ã‚’æ‹¾ã†æ™‚é–“ã‚’å€‹åˆ¥ã«ä½œã‚‹ã€‚"},
    "ãƒ†ã‚­ã‚¹ãƒˆ": {å›°ã‚Š:"äºˆå®šå¤‰æ›´ã§ãƒ‘ãƒ‹ãƒƒã‚¯ã€æ‰‹é †ã¸ã®ã“ã ã‚ã‚Š", ç¿»è¨³:"ã€Œè¦‹é€šã—ã€ãŒãªã„ã“ã¨ã¸ã®å¼·ã„ä¸å®‰ã‚’æ„Ÿã˜ã¦ã„ã‚‹", å¯¾å¿œ:"æ—©ã‚ã®äºˆå‘Šã‚’å¾¹åº•ã€‚ã€Œæ¬¡ã¯ã€‡ã€‡ã ã‚ˆã€ã¨è¦–è¦šçš„ã«ä¼ãˆã‚‹ã€‚"},
    "ãƒã‚¬ãƒ†ã‚£ãƒ–": {å›°ã‚Š:"æ¿€ã—ã„ã‚¤ãƒ¤ã‚¤ãƒ¤ã€æ€ã„é€šã‚Šã«ãªã‚‰ãªã„ã¨çˆ†ç™º", ç¿»è¨³:"ã€Œè‡ªåˆ†ã®é¡˜ã„ã€ã‚’å¦¥å”ã›ãšè¿½æ±‚ã™ã‚‹å¼·ã„æ„å¿—ã®è¡¨ã‚Œ", å¯¾å¿œ:"ä¸€åº¦ã€Œæ‚”ã—ã„ã­ã€ã¨æ„Ÿæƒ…ã‚’100%å—ã‘æ­¢ã‚ã¦ã‹ã‚‰äº¤æ¸‰ã¸ã€‚"}
};

const kaDetails = {
    "è¦–è¦šæ”¯æ´": {å›°ã‚Š:"æŒ‡ç¤ºã‚’ã‚¹ãƒ«ãƒ¼ã™ã‚‹ã€ä½•åº¦ã‚‚åŒã˜ã“ã¨ã‚’èã", æ‰‹ç«‹ã¦:"ã€ç›®ã§è¦‹ã¦ã‚ã‹ã‚‹ã‚ˆã†ã«ã€‘çµµã‚«ãƒ¼ãƒ‰ã€å†™çœŸã€ã‚¿ã‚¤ãƒãƒ¼", å£°ã‹ã‘:"ã€Œã“ã‚Œã‚’è¦‹ã¦ã­ã€ã¨æ³¨ç›®ã•ã›ã¦ã‹ã‚‰è¦–è¦šæƒ…å ±ã‚’ç¤ºã™ã€‚"},
    "è´è¦šé…æ…®": {å›°ã‚Š:"é¨’ãŒã—ã„ã¨ãƒ‘ãƒ‹ãƒƒã‚¯ã€è©±ãŒèãå–ã‚Œãªã„", æ‰‹ç«‹ã¦:"ã€è€³ã®è² æ‹…ã‚’æ¸›ã‚‰ã™ã€‘ã‚¤ãƒ¤ãƒ¼ãƒãƒ•ã€é™ã‹ãªé¿é›£å ´æ‰€", å£°ã‹ã‘:"ä¸€å¯¾ä¸€ã§ã€é¨’éŸ³ã®ãªã„é™ã‹ãªå ´æ‰€ã§çŸ­ãä¼ãˆã‚‹ã€‚"},
    "æ§‹é€ åŒ–": {å›°ã‚Š:"ç‰‡ä»˜ã‘ãŒã§ããªã„ã€ä½•ã‹ã‚‰ã—ã¦ã„ã„ã‹ä¸æ˜", æ‰‹ç«‹ã¦:"ã€ç‰©ã®ä½æ‰€ã‚’æ±ºã‚ã‚‹ã€‘ãƒ©ãƒ™ãƒ«è²¼ã‚Šã€æ‰‹é †ã®1,2,3è¡¨ç¤º", å£°ã‹ã‘:"ã€Œã¾ãšã¯1ç•ªã®ç®±ã‚’ç½®ã„ã¦ã­ã€ã¨ä¸€ã¤ãšã¤å‹•ã‹ã™ã€‚"},
    "æ„Ÿè¦šçµ±åˆ": {å›°ã‚Š:"åé£Ÿã€ç‰¹å®šã®æœã‚’å«ŒãŒã‚‹ã€è½ã¡ç€ããŒãªã„", æ‰‹ç«‹ã¦:"ã€æ„Ÿè¦šã®éä¸è¶³ã‚’è£œã†ã€‘ãƒ–ãƒ©ãƒ³ã‚³ã€ãã‚…ã£ã¨æŠ±ãã—ã‚ã‚‹", å£°ã‹ã‘:"ã€Œã“ã‚ŒãŒå«Œãªã‚“ã ã­ã€ã¨ä¸å¿«ã‚’é¿ã‘ã€å¥½ããªåˆºæ¿€ã§æº€ãŸã™ã€‚"},
    "å®Ÿè¡Œæ©Ÿèƒ½": {å›°ã‚Š:"å¿˜ã‚Œç‰©ãŒå¤šã„ã€æ™‚é–“ã®åˆ‡ã‚Šæ›¿ãˆãŒã§ããªã„", æ‰‹ç«‹ã¦:"ã€å¤–ä»˜ã‘ã®å¸ä»¤å¡”ã€‘ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã€5åˆ†å‰ã‚¢ãƒ©ãƒ¼ãƒ ", å£°ã‹ã‘:"ã€Œã‚ã¨3åˆ†ã§çµ‚ã‚ã‚Šã ã‚ˆã€ã¨çµ‚ã‚ã‚Šã®æ™‚é–“ã‚’å…·ä½“çš„ã«ã€‚"}
};

const miData = [{c:"è¨€èª",q:"ğŸ“š ãŠã—ã‚ƒã¹ã‚Šã‚„ç‰©èªä½œã‚ŠãŒå¥½ã"},{c:"è¨€èª",q:"ğŸ“– çµµæœ¬ã®èª­ã¿èã‹ã›ã‚’æ¥½ã—ã‚ã‚‹"},{c:"è«–ç†",q:"ğŸ§© ãƒ‘ã‚ºãƒ«ã‚„åˆ†é¡ã€æ³•å‰‡æ¢ã—ãŒå¾—æ„"},{c:"è«–ç†",q:"ğŸ” ã€Œãªãœï¼Ÿã€ã¨ä»•çµ„ã¿ã‚’çŸ¥ã‚ŠãŸãŒã‚‹"},{c:"ç©ºé–“",q:"ğŸ—ºï¸ åœ°å›³ã‚„çµµã®å¥¥è¡Œãã‚’æ‰ãˆã‚‹ã®ãŒä¸Šæ‰‹"},{c:"ç©ºé–“",q:"ğŸ° ãƒ–ãƒ­ãƒƒã‚¯ç­‰ã§ç«‹ä½“ã‚’ä½œã‚‹ã®ãŒå¥½ã"},{c:"èº«ä½“",q:"ğŸƒâ€â™‚ï¸ ãƒ€ãƒ³ã‚¹ã‚„ã‚¹ãƒãƒ¼ãƒ„ç­‰ã€ä½“ãŒå™¨ç”¨"},{c:"èº«ä½“",q:"âœ‚ï¸ å·¥ä½œã‚„æ–™ç†ç­‰ã€æ‰‹å…ˆãŒå™¨ç”¨"},{c:"éŸ³æ¥½",q:"ğŸ¶ é¼»æ­Œã‚„ãƒªã‚ºãƒ ä¹—ã‚ŠãŒè‡ªç„¶ã«å‡ºã‚‹"},{c:"éŸ³æ¥½",q:"ğŸ¹ éŸ³ã‚„å£°ã«æ•æ„Ÿã«åå¿œã™ã‚‹"},{c:"å¯¾äºº",q:"ğŸ¤ å‹é”ã®æ°—æŒã¡ã‚’å¯Ÿã™ã‚‹ã®ãŒä¸Šæ‰‹"},{c:"å¯¾äºº",q:"ğŸ« ã¿ã‚“ãªã§ä½•ã‹ã‚’ã™ã‚‹ã®ãŒå¥½ã"},{c:"å†…çœ",q:"ğŸ§˜ è‡ªåˆ†ã®æ„å¿—ãŒã¯ã£ãã‚Šã—ã¦ã„ã‚‹"},{c:"å†…çœ",q:"ğŸ’­ ä¸€äººã§é™ã‹ã«è€ƒãˆã‚‹æ™‚é–“ãŒå¤§åˆ‡"},{c:"åšç‰©",q:"ğŸ¦– æç«œã‚„æ¤ç‰©ç­‰ã®è¦³å¯Ÿãƒ»åé›†ãŒå¥½ã"}];
const kiData = [{t:"ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ",q:"ğŸ‘‚ éŸ³ã‚„åˆºæ¿€ã«ã¨ã¦ã‚‚æ•æ„Ÿ"},{t:"ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ",q:"ğŸ˜Ÿ å¤±æ•—ã‚’æ€–ãŒã‚‹æ°—æŒã¡ãŒå¼·ã„"},{t:"ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ",q:"ğŸŒ³ åˆã‚ã¦ã®å ´æ‰€ã§ã¯æ…é‡"},{t:"ã‚¢ã‚¯ãƒ†ã‚£ãƒ–",q:"ğŸš€ è€ƒãˆã‚‹ã‚ˆã‚Šå…ˆã«ä½“ãŒå‹•ã"},{t:"ã‚¢ã‚¯ãƒ†ã‚£ãƒ–",q:"ğŸ”¥ ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæº¢ã‚Œã¦ã„ã‚‹"},{t:"ã‚¨ãƒ³ã‚¸ã‚§ãƒ«",q:"ğŸŒ¸ ç©ã‚„ã‹ã§å‘¨ã‚Šã«åˆã‚ã›ãŒã¡"},{t:"ã‚¨ãƒ³ã‚¸ã‚§ãƒ«",q:"ğŸ¤ èª¿å’Œã‚’å„ªå…ˆã•ã›ã‚‹ã“ã¨ãŒå¤šã„"},{t:"ãƒ†ã‚­ã‚¹ãƒˆ",q:"â° ãƒ«ãƒ¼ãƒãƒ³ã‚„æ±ºã¾ã‚Šã‚’å¥½ã‚€"},{t:"ãƒ†ã‚­ã‚¹ãƒˆ",q:"ğŸ“‰ å…·ä½“çš„ãªæ•°å­—ã‚„ãƒ«ãƒ¼ãƒ«ãŒå®‰å¿ƒ"},{t:"ãƒã‚¬ãƒ†ã‚£ãƒ–",q:"âš¡ æ„Ÿæƒ…ã®çˆ†ç™ºãŒæ¿€ã—ã„"},{t:"ãƒã‚¬ãƒ†ã‚£ãƒ–",q:"ğŸ’ è‡ªåˆ†ã®ã“ã ã‚ã‚ŠãŒéå¸¸ã«å¼·ã„"},{t:"ãƒ‡ãƒªã‚±ãƒ¼ãƒˆ",q:"ğŸ‘€ ç©ºæ°—ã‚’èª­ã¿ã™ãã¦ç–²ã‚Œã‚„ã™ã„"},{t:"ã‚¢ã‚¯ãƒ†ã‚£ãƒ–",q:"ğŸƒâ€â™‚ï¸ å¸¸ã«æ–°ã—ã„åˆºæ¿€ã‚’æ±‚ã‚ã¦ã„ã‚‹"},{t:"ãƒ†ã‚­ã‚¹ãƒˆ",q:"ğŸ“¦ ç‰©ã®é…ç½®ãŒæ±ºã¾ã£ã¦ã„ã‚‹ã¨å®‰å¿ƒ"},{t:"ã‚¨ãƒ³ã‚¸ã‚§ãƒ«",q:"ğŸ•Šï¸ äº‰ã„ã‚’é¿ã‘ã€å¹³å’Œã‚’é¡˜ã†"}];
const kaData = [{t:"è¦–è¦šæ”¯æ´",q:"ğŸ“¢ è¨€è‘‰ã®æŒ‡ç¤ºã‚’å¿˜ã‚Œã‚„ã™ã„"},{t:"è¦–è¦šæ”¯æ´",q:"ğŸ–¼ï¸ å›³ã‚„å†™çœŸã®æ–¹ãŒç†è§£ã—ã‚„ã™ã„"},{t:"è¦–è¦šæ”¯æ´",q:"ğŸ“… äºˆå®šãŒç›®ã«è¦‹ãˆã‚‹ã¨å®‰å¿ƒã™ã‚‹"},{t:"è´è¦šé…æ…®",q:"ğŸ‘‚ é¨’ãŒã—ã„å ´æ‰€ã ã¨æ··ä¹±ã™ã‚‹"},{t:"è´è¦šé…æ…®",q:"ğŸ§ é™ã‹ãªå ´æ‰€ã§ãƒ›ãƒƒã¨ã§ãã‚‹"},{t:"æ§‹é€ åŒ–",q:"ğŸ§º ç‰‡ä»˜ã‘å ´æ‰€ãŒæ±ºã¾ã£ã¦ãªã„ã¨å›°ã‚‹"},{t:"æ§‹é€ åŒ–",q:"ğŸªœ æ‰‹é †ã‚’ç´°ã‹ãåˆ†ã‘ã¦ã»ã—ã„"},{t:"æ„Ÿè¦šçµ±åˆ",q:"ğŸ‘• ç‰¹å®šã®æ„Ÿè§¦ã‚’å«ŒãŒã‚‹"},{t:"æ„Ÿè¦šçµ±åˆ",q:"ğŸŒ€ é«˜ã„æ‰€ã‚„å›è»¢ãŒå¤§å¥½ã"},{t:"å®Ÿè¡Œæ©Ÿèƒ½",q:"â¸ï¸ è¡Œå‹•ã®åˆ‡ã‚Šæ›¿ãˆãŒé›£ã—ã„"},{t:"å®Ÿè¡Œæ©Ÿèƒ½",q:"ğŸ“ å¿˜ã‚Œç‰©ã‚„ç´›å¤±ãŒå¤šã„"},{t:"å®Ÿè¡Œæ©Ÿèƒ½",q:"â³ æ™‚é–“ã®æµã‚Œã‚’æ´ã¿ã«ãã„"},{t:"æ„Ÿè¦šçµ±åˆ",q:"ğŸ§¸ ãã‚…ã£ã¨ã™ã‚‹åˆºæ¿€ã§è½ç€ã"},{t:"å®Ÿè¡Œæ©Ÿèƒ½",q:"ğŸ’ æº–å‚™ã®é †ç•ªãŒã‚ã‹ã‚‰ãªããªã‚‹"},{t:"æ§‹é€ åŒ–",q:"ğŸ¤« å›²ã‚ã‚ŒãŸç©ºé–“ãŒè½ã¡ç€ã"}];

function autoScroll(el) { const b = el.closest('.q-block').nextElementSibling; if (b && b.classList.contains('q-block')) setTimeout(() => b.scrollIntoView({ behavior: 'smooth', block: 'center' }), 300); }
function create5Scale(name) { return `<div class="radio-group">${['ã‚ˆã<br>ã‚ã¦ã¯ã¾ã‚‹','ã‚ã¦ã¯ã¾ã‚‹','ã‚ã‹ã‚‰<br>ãªã„','ã‚ã¾ã‚Š<br>ã‚ã¦ã¯ã¾ã‚‰ãªã„','ã‚ã¦ã¯ã¾<br>ã‚‰ãªã„'].map((l,i)=>`<label class="radio-label"><input type="radio" name="${name}" value="${4-i}" onclick="autoScroll(this)">${l}</label>`).join('')}</div>`; }

function setup() {
    ['mi','ki','ka'].forEach(type => {
        const target = document.getElementById(type+'-q');
        const data = type === 'mi' ? miData : type === 'ki' ? kiData : kaData;
        data.forEach((d,i)=> target.innerHTML += `<div class="q-block"><span class="q-text">${i+1}. ${d.q}</span>${create5Scale(type+i)}</div>`);
    });
}
setup();

let results = { mi:null, ki:null, ka:null };

function calcMI() {
    let scores = {}; miData.forEach((d,i) => { const v = parseInt(document.querySelector(`input[name="mi${i}"]:checked`)?.value || 0); scores[d.c] = (scores[d.c] || 0) + v; });
    results.mi = scores; showMiChart(scores);
    const top = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
    const d = miDetails[top];
    document.getElementById('mi-res').innerHTML = `<h3>ğŸŒŸ å¼·ã¿ï¼š${top}çš„çŸ¥èƒ½</h3>èƒ½åŠ›ï¼š${d.èƒ½åŠ›}<br>éŠã³ï¼š${d.éŠã³}<br>é–¢ã‚ã‚Šï¼š${d.é–¢ã‚ã‚Š}<br>é ¼ã‚‹äººï¼š${d.é ¼ã‚‹äºº}`;
    document.getElementById('mi-res').style.display = 'block'; checkReady();
}

function showMiChart(scores) {
    const ctx = document.getElementById('miChart').getContext('2d');
    const labels = ["è¨€èª","è«–ç†","ç©ºé–“","èº«ä½“","éŸ³æ¥½","å¯¾äºº","å†…çœ","åšç‰©"];
    if(window.miRadar) window.miRadar.destroy();
    window.miRadar = new Chart(ctx, { type:'radar', data:{ labels, datasets:[{ label:'ãƒãƒ©ãƒ³ã‚¹', data: labels.map(l=>scores[l]||0), backgroundColor:'rgba(255,127,127,0.2)', borderColor: '#ff7f7f', borderWidth:2 }]}, options:{ scales:{ r:{ min:0, max:8, ticks:{ display:false }}} }});
}

function calcKi() {
    let types = {}; kiData.forEach((d,i) => { const v = parseInt(document.querySelector(`input[name="ki${i}"]:checked`)?.value || 0); types[d.t] = (types[d.t] || 0) + v; });
    const top = Object.keys(types).reduce((a, b) => types[a] > types[b] ? a : b);
    results.ki = { type: top, detail: kiDetails[top] };
    document.getElementById('ki-res').innerHTML = `<h3>ğŸŒˆ æ°—è³ªï¼š${top}ã‚¿ã‚¤ãƒ—</h3>å›°ã‚‹å ´é¢ï¼š${kiDetails[top].å›°ã‚Š}<br>ç¿»è¨³ï¼š${kiDetails[top].ç¿»è¨³}<br>å¯¾å¿œï¼š${kiDetails[top].å¯¾å¿œ}`;
    document.getElementById('ki-res').style.display = 'block'; checkReady();
}

function calcKa() {
    let scores = {}; kaData.forEach((d,i) => { const v = parseInt(document.querySelector(`input[name="ka${i}"]:checked`)?.value || 0); scores[d.t] = (scores[d.t] || 0) + v; });
    const top = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
    results.ka = { type: top, detail: kaDetails[top] };
    document.getElementById('ka-res').innerHTML = `<h3>ğŸ  ç’°å¢ƒï¼š${top}ã¸ã®é…æ…®</h3>å›°ã‚‹å ´é¢ï¼š${kaDetails[top].å›°ã‚Š}<br>æ‰‹ç«‹ã¦ï¼š${kaDetails[top].æ‰‹ç«‹ã¦}<br>å£°ã‹ã‘ï¼š${kaDetails[top].å£°ã‹ã‘}`;
    document.getElementById('ka-res').style.display = 'block'; checkReady();
}

function checkReady() { if([results.mi, results.ki, results.ka].filter(r => r !== null).length >= 2) { document.getElementById('total-btn').disabled = false; } }

function generateTotalDiagnosis() {
    const miTop = results.mi ? Object.keys(results.mi).reduce((a, b) => results.mi[a] > results.mi[b] ? a : b) : "ï¼ˆæœªå›ç­”ï¼‰";
    let html = `
        <div class="summary-box" style="border-left-color:var(--mi-color)">ğŸ¤ <strong>å¼·ã¿ï¼ˆ${miTop}ï¼‰</strong>ï¼š${miDetails[miTop].èƒ½åŠ›}ã€‚${miDetails[miTop].é ¼ã‚‹äºº}ã«å”åŠ›ã‚’ä»°ãã¾ã—ã‚‡ã†ã€‚</div>
        <div class="summary-box" style="border-left-color:var(--ki-color)">ğŸ«‚ <strong>æ€§æ ¼ï¼ˆ${results.ki.type}ï¼‰</strong>ï¼š${results.ki.detail.ç¿»è¨³}ã€‚</div>
        <div class="summary-box" style="border-left-color:var(--ka-color)">ğŸ—ï¸ <strong>ç’°å¢ƒï¼ˆ${results.ka.type}ï¼‰</strong>ï¼š${results.ka.detail.æ‰‹ç«‹ã¦}ã€‚</div>
        
        <div class="translation-box">
            <strong>ğŸ’ ç¿»è¨³ï¼šå›°ã£ãŸğŸ˜­ ã‚’ ã‚µãƒãƒ¼ãƒˆã®è¦–ç‚¹ã¸</strong><br>
            æ—¥å¸¸ã®ã€Œ${results.ki.detail.å›°ã‚Š}ã€ã‚„ã€Œ${results.ka.detail.å›°ã‚Š}ã€ã¨ã„ã†å ´é¢ã¯ã€ãŠå­ã•ã‚“ã®<strong>ã€Œ${results.ki.detail.ç¿»è¨³}ã€</strong>ãŒåŸå› ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚<br><br>
            å¤§äººãŒ<strong>${results.ka.detail.æ‰‹ç«‹ã¦}</strong>ã‚’ç”¨æ„ã—ã€<strong>ã€Œ${results.ki.detail.å¯¾å¿œ}ã€</strong>ã‚’å¿ƒãŒã‘ã‚‹ã“ã¨ã§ã€ãŠå­ã•ã‚“ã¯ã‚ˆã‚Šéã”ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚
        </div>

        <div class="message-box">
            <strong>ğŸ’Œ ãŠçˆ¶ã•ã‚“ãƒ»ãŠæ¯ã•ã‚“ã¸</strong><br>
            ã„ã¤ã‚‚ã€æœ¬å½“ã«ãŠç–²ã‚Œæ§˜ã§ã™ã€‚ãŠå­ã•ã‚“ã‚’ç†è§£ã—ã‚ˆã†ã¨ã™ã‚‹ãã®æ¸©ã‹ãªã¾ãªã–ã—ãŒã€ä½•ã‚ˆã‚Šã®æ”¯æ´ã§ã™ã€‚å®Œç’§ã‚’ç›®æŒ‡ã•ãšã€ã¾ãšã¯ä»Šæ—¥ã®çµæœã‚’ä¸€ã¤ã®ã€Œé¢ç™½ã„ç™ºè¦‹ã€ã¨ã—ã¦ã€ãŠå­ã•ã‚“ã¨å‘ãåˆã£ã¦ã¿ã¦ãã ã•ã„ã€‚
        </div>`;
    document.getElementById('total-content').innerHTML = html;
}

// ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆãƒ­ã‚¸ãƒƒã‚¯
document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn, .tab-content').forEach(el => el.classList.remove('active'));
        btn.classList.add('active'); 
        document.getElementById(btn.dataset.tab).classList.add('active');
        if(btn.dataset.tab === 'total') generateTotalDiagnosis();
        window.scrollTo({top: 0, behavior: 'smooth'});
    });
});
</script>
</body>
</html>
